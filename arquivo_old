#include "incsys.h"

//criando classe arquivo
class Arquivoold {

private:
    std::string nomeArquivo_;
    std::ifstream arquivo_;

public:
    //cria a instancia de arquivo com o nome do arquivo
    Arquivo(const std::string& nomeArquivo){
        nomeArquivo_ = nomeArquivo;
    }
    
    void abrir(){
        try{
            std::cout<<"Abrindo arquivo..."<<std::endl;
            arquivo_.open(nomeArquivo_);

            if(arquivo_.is_open()){
                std::cout<<"Arquivo aberto com sucesso"<<std::endl;
            }
            else{
                std::cout<<"Arquivo nao foi aberto"<<std::endl;
            }
        }
        catch (std::exception& e) {
        // Captura e trata uma exceção do tipo std::exception
            std::cout << "Erro: " << e.what() << std::endl;
        }
        catch (...) {
        // Captura e trata qualquer outra exceção não tratada anteriormente
            std::cout << "Erro desconhecido" << std::endl;
        } 
    }

    void fechar() {
        if (arquivo_.is_open()) {
            arquivo_.close();
            std::cout<<"Arquivo fechado com sucesso"<<std::endl;
        }
        else{
            std::cout<<"Arquivo nao esta aberto"<<std::endl;
        }
    }

    bool estaAberto() const {
        return arquivo_.is_open();
    }

    void lerConteudo() {
        if (arquivo_.is_open()) {
            std::string linha;
            while (std::getline(arquivo_, linha)) {
                std::cout << linha << std::endl;
            }
        }
    }

    std::string buscarNome(){
        return nomeArquivo_;
    }
};